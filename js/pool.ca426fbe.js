(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pool"],{"6c27":function(t,e,o){"use strict";o("dc5b")},"7eb0":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-main",{staticStyle:{"background-color":"#000000",color:"white","font-family":"'Noto Sans SC'","font-weight":"300"}},[o("el-row",{staticStyle:{width:"100%"},attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{xs:24,sm:24,md:18,xl:18}},[o("el-row",[o("el-col",{attrs:{xs:24,sm:10}},[o("el-row",{attrs:{type:"flex",justify:"flex-start"}},[o("div",{staticStyle:{"margin-top":"10px","text-align":"left"},attrs:{span:8}},[o("img",{staticStyle:{"text-align":"left",width:"66px"},attrs:{src:"cfx-logo.svg"}})]),o("div",{staticStyle:{"text-align":"left",color:"#ffffff","font-size":"18px","margin-top":"20px","margin-left":"20px"},attrs:{span:16}},[o("div",{staticStyle:{display:"inline-block"}},[t._v(" "+t._s(t.$t("poolSentence4"))+" ")]),o("div",{staticStyle:{color:"#E12968","font-weight":"400"}},[t._v(" $"+t._s(t.poolMoney)+" ")])])])],1),o("el-col",{attrs:{xs:24,sm:{span:14}}},[o("el-row",{staticStyle:{"margin-top":"20px"}},[o("el-col",{attrs:{xs:{span:11},sm:{span:8,offset:7}}},[o("vs-button",{staticStyle:{"font-size":"20px","line-height":"40px",background:"linear-gradient(90deg, #E91E63, #FC9E7C)"},attrs:{block:"",color:"#E91E63"},on:{click:function(e){return e.stopPropagation(),t.showDepositDialog(e)}}},[t._v(" "+t._s(t.$t("deposit"))+" ")])],1),o("el-col",{attrs:{xs:{span:11,offset:2},sm:{span:8,offset:1}}},[o("vs-button",{staticStyle:{"font-size":"20px","line-height":"40px"},attrs:{block:"",border:"",color:"#E91E63"},on:{click:function(e){return e.stopPropagation(),t.showWithdrawDialog(e)}}},[t._v(" "+t._s(t.$t("withdraw"))+" ")])],1)],1)],1)],1)],1)],1),o("div",{staticStyle:{"padding-top":"-80px","padding-bottom":"300px",background:"url('home-bg-2.png')","background-repeat":"no-repeat","background-size":"100%","background-position":"right",width:"100%"}}),o("el-row",{staticStyle:{"margin-top":"-270px"},attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{"line-height":"40px"},attrs:{xs:24,md:18,xl:18}},[o("div",{staticClass:"shadow-border"},[o("el-row",{staticStyle:{"margin-bottom":"10px"}},[o("el-col",{attrs:{xs:24,sm:24,lg:12}},[o("div",{staticStyle:{color:"#ffffff"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{"line-height":"60px"},attrs:{xs:24,md:20}},[o("div",{staticClass:"prize-shadow-border",staticStyle:{"margin-top":"40px","margin-bottom":"20px"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("div",{staticStyle:{"margin-top":"10px","text-align":"right"}},[o("img",{staticClass:"img-width",staticStyle:{"text-align":"right"},attrs:{src:"cfx-logo.svg"}})]),o("div",{staticStyle:{"text-align":"left",color:"#ffffff","font-size":"18px","margin-top":"12px"}},[o("div",{staticClass:"money-text",staticStyle:{"margin-left":"20px","text-align":"left","font-weight":"800",display:"inline-block",color:"#FFFFFF",background:"linear-gradient(77.7398deg, #C9225B 0.9521484375%, #FF3278 60.6689453125%, #FC9E7C 100%)","-webkit-background-clip":"text","-webkit-text-fill-color":"transparent","letter-spacing":"8px"}},[t._v(" $"+t._s(t.poolAwardMoney)+" ")])])]),o("el-row",[o("div",{staticStyle:{"margin-top":"-10px","padding-bottom":"10px"}},[t._v(" "+t._s(t.$t("poolsSentence2"))+" ")])])],1)])],1)],1)]),o("el-col",{attrs:{xs:24,sm:24,lg:12}},[o("div",{staticStyle:{"margin-bottom":"30px"}},[o("el-row",[o("div",{staticClass:"prize-text"},[t._v(" "+t._s(t.$t("poolSentence1"))+" ")])]),o("el-row",{staticStyle:{"margin-top":"20px"},attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:24}},[o("circular-count-down-timer",{ref:"timer",staticStyle:{color:"#ffffff"},attrs:{"initial-value":0,"stroke-width":3,"seconds-stroke-color":"#ffffff","minutes-stroke-color":"#ffffff","hours-stroke-color":"#ffffff","days-stroke-color":"#ffffff","underneath-stroke-color":"#E91E63","seconds-fill-color":"rbga(#ffffff,0)","minutes-fill-color":"rbga(#ffffff,0)","hours-fill-color":"rbga(#ffffff,0)","days-fill-color":"rbga(#ffffff,0)",size:t.countdownTimerWidth,padding:t.countdownTimerPadding,"day-label":t.$t("days"),"hour-label":t.$t("hours"),"minute-label":t.$t("minutes"),"second-label":t.$t("seconds"),"show-second":!0,"show-minute":!0,"show-hour":!0,"show-negatives":!1,paused:!1,"notify-every":"minute"}})],1)],1)],1)])],1)],1)])],1),o("el-row",{staticStyle:{"margin-top":"40px",background:"url('home-bg-3.png')","background-repeat":"no-repeat","background-size":"100%","background-position":"right"},attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{"line-height":"40px"},attrs:{xs:24,md:18,xl:18}},[o("div",{staticClass:"shadow-border"},[o("el-row",{staticStyle:{color:"#DD2866","font-size":"24px","margin-top":"40px"}},[t._v(" "+t._s(t.$t("poolSentence2"))+" ")]),o("el-row",{staticStyle:{"font-size":"16px"}},[t._v(" "+t._s(t.$t("poolSentence3"))+" ")]),o("el-row",{staticStyle:{"margin-top":"40px"},attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{border:"2px dashed #E91E63"},attrs:{xs:24,sm:12}},[o("img",{attrs:{src:"money.png"}})])],1),o("el-row",{staticStyle:{"font-size":"32px","margin-top":"20px","margin-bottom":"30px"},attrs:{type:"flex",justify:"center"}},[t._v(" $"+t._s(t.poolAwardMoney)+" ")])],1)])],1),o("el-row",{staticClass:"partner-background",staticStyle:{"margin-top":"40px","padding-bottom":"200px",width:"100%","background-image":"url('home-bg-4.png')","background-repeat":"no-repeat","background-position":"right bottom"},attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{"line-height":"40px"},attrs:{xs:24,md:18,xl:18}},[o("div",{staticClass:"shadow-border"},[o("el-row",{staticStyle:{"margin-top":"40px"},attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{"line-height":"40px"},attrs:{xs:24,md:22,xl:22}},[o("el-row",{staticStyle:{"text-align":"left","font-size":"30px","font-weight":"500","margin-left":"10px"}},[t._v(" "+t._s(t.$t("poolStat"))+" ")]),o("div",{staticStyle:{width:"100%",height:"1px","background-color":"#E91E63","margin-top":"20px"}}),o("div",{staticClass:"stat-shadow-border",staticStyle:{"margin-top":"40px","margin-bottom":"40px","font-size":"18px"}},[o("el-row",{staticStyle:{"padding-top":"30px"}},[o("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8,offset:1}},[t._v(" "+t._s(t.$t("poolSentence4"))+" ")]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[t._v(" "+t._s(t.poolBalance)+"PCFX ")])],1),o("el-row",[o("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8,offset:1}},[t._v(" "+t._s(t.$t("poolSentence5"))+" ")]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[t._v(" "+t._s(t.reserveTotalSupply)+" PCFX ")])],1),o("el-row",[o("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8,offset:1}},[t._v(" "+t._s(t.$t("poolSentence6"))+" ")]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[t._v(" 10% ")])],1),o("el-row",[o("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8,offset:1}},[t._v(" "+t._s(t.$t("poolSentence7"))+" ")]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[t._v(" Conflux Internal Interest ")])],1),o("div",{staticStyle:{width:"100%",height:"1px","background-color":"#E91E63","margin-top":"20px"}}),o("el-row",[o("el-col",{staticStyle:{"text-align":"left"},attrs:{span:22,offset:1}})],1),o("el-row",[o("el-col",{staticStyle:{"text-align":"left","padding-top":"10px"},attrs:{span:8,offset:1}},[t._v(" "+t._s(t.$t("poolSentence9"))+" ")]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[t._v(" "+t._s(t.daliyPoolGo)+" POOLGO ")])],1),o("el-row",[o("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8,offset:1}},[t._v(" "+t._s(t.$t("poolSentence10"))+" ")]),o("el-col",{staticStyle:{"text-align":"right","padding-bottom":"20px"},attrs:{span:14}},[t._v(" *% ")])],1)],1)],1)],1)],1)])],1),o("el-row",{staticStyle:{"margin-top":"-150px"},attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{"line-height":"40px"},attrs:{xs:24,md:18,xl:18}},[o("div",{staticClass:"shadow-border"},[o("el-row",{staticStyle:{"margin-top":"40px"},attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{"line-height":"40px"},attrs:{xs:24,md:22,xl:22}},[o("el-row",{},[o("el-col",{staticStyle:{"font-weight":"500","font-size":"30px","text-align":"left","padding-left":"10px"},attrs:{span:12}},[t._v(" "+t._s(t.$t("poolSentence11"))+" ")]),o("el-col",{staticStyle:{"font-size":"14px","text-align":"right","margin-top":"10px","padding-right":"10px"},attrs:{span:12}},[t._v(" "+t._s(t.$t("poolSentence12"))+" ")])],1),o("div",{staticStyle:{width:"100%",height:"1px","background-color":"#E91E63","margin-top":"20px"}}),o("div",{staticClass:"stat-shadow-border",staticStyle:{"margin-top":"40px","margin-bottom":"40px","font-size":"18px"}},[o("el-row",{staticStyle:{"padding-top":"30px","font-size":"22px","font-weight":"600",color:"#DD2866"}},[o("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8,offset:1}},[t._v(" "+t._s(t.$t("poolSentence13"))+" ")]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[t._v(" $"+t._s(t.poolAwardMoney)+" ")])],1),0==t.awardInfoArray.length?o("el-row",{staticStyle:{"text-align":"center"}},[t._v(" "+t._s(t.$t("poolSentence14"))+" ")]):o("el-row",t._l(t.awardInfoArray,(function(e,r){return o("el-row",{key:r},[o("el-col",{staticStyle:{"text-align":"left"},attrs:{span:8,offset:1}},[t._v(" "+t._s(e.winner)+" ")]),o("el-col",{staticStyle:{"text-align":"right"},attrs:{span:14}},[t._v(" $"+t._s(e.amount)+" ")])],1)})),1)],1)],1)],1)],1)])],1),o("el-row",{staticStyle:{margin:"0 auto","margin-top":"40px","margin-bottom":"100px",color:"#999999"}},[t._v(" "+t._s(t.$t("moneyMore"))+" ")]),o("vs-dialog",{attrs:{loading:t.depositDialogLoading,width:"300px","not-center":"","prevent-close":""},scopedSlots:t._u([{key:"header",fn:function(){return[o("h4",{staticClass:"not-margin"},[t._v(" "+t._s(t.$t("poolsSentence3part1"))+" "),o("b",[t._v(t._s(t.$t("poolsSentence3part2"))+" ")]),t._v(" "+t._s(t.$t("poolsSentence3part3"))+" ")])]},proxy:!0},{key:"footer",fn:function(){return[o("div",{staticClass:"con-footer"},[t.isNeedApprove?o("vs-button",{attrs:{transparent:""},on:{click:t.confirmApprove}},[t._v(" "+t._s(t.$t("noticeApprove"))+" ")]):o("vs-button",{attrs:{transparent:""},on:{click:t.confirmDeposit}},[t._v(" "+t._s(t.$t("noticeDeposit"))+" ")]),o("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(e){t.depositDialogShow=!1}}},[t._v(" "+t._s(t.$t("noticeCancel"))+" ")])],1)]},proxy:!0}]),model:{value:t.depositDialogShow,callback:function(e){t.depositDialogShow=e},expression:"depositDialogShow"}},[o("div",{staticClass:"con-content"},[t.isNeedApprove?o("el-row",{staticStyle:{"font-size":"12px"}},[t._v(t._s(t.$t("noticeApproveContent")))]):o("vs-input",{attrs:{"icon-after":"",placeholder:t.$t("noticeOwnPcfx")+t.pcfxNumber.toFormat(2),type:"number"},scopedSlots:t._u([{key:"icon",fn:function(){return[o("vs-button",{attrs:{circle:"",flat:"",warn:""},on:{click:function(e){return t.maxDepositPoolMoney()}}},[t._v(" "+t._s(t.$t("max"))+" ")])]},proxy:!0}]),model:{value:t.depositPoolMoney,callback:function(e){t.depositPoolMoney=e},expression:"depositPoolMoney"}})],1)]),o("vs-dialog",{attrs:{loading:t.withdrawPoolDialogLoading,width:"300px","not-center":"","prevent-close":""},scopedSlots:t._u([{key:"header",fn:function(){return[o("h4",{staticClass:"not-margin"},[t._v(" "+t._s(t.$t("noticeWithdraw"))+" "),o("b",[t._v("PCFX")])])]},proxy:!0},{key:"footer",fn:function(){return[o("div",{staticClass:"con-footer"},[o("vs-button",{attrs:{transparent:""},on:{click:t.showTimelockDialog}},[t._v(" "+t._s(t.$t("noticeCountdownWithdraw"))+" ")]),o("vs-button",{attrs:{transparent:""},on:{click:t.showImmediateDialog}},[t._v(" "+t._s(t.$t("noticeNowWithdraw"))+" ")]),o("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(e){t.withdrawPoolDialogShow=!1}}},[t._v(" "+t._s(t.$t("noticeCancel"))+" ")])],1)]},proxy:!0}]),model:{value:t.withdrawPoolDialogShow,callback:function(e){t.withdrawPoolDialogShow=e},expression:"withdrawPoolDialogShow"}},[o("div",{staticClass:"con-content"},[o("vs-input",{attrs:{"icon-after":"",placeholder:t.$t("noticeWithdrawPcfx")+t.ticketNumber.toFormat(2),type:"number"},scopedSlots:t._u([{key:"icon",fn:function(){return[o("vs-button",{attrs:{circle:"",flat:"",warn:""},on:{click:t.maxWithdrawPoolMoney}},[t._v(" "+t._s(t.$t("max"))+" ")])]},proxy:!0}]),model:{value:t.withdrawPoolMoney,callback:function(e){t.withdrawPoolMoney=e},expression:"withdrawPoolMoney"}})],1)]),o("vs-dialog",{attrs:{loading:t.timelockDialogLoading,width:"550px","not-center":"","prevent-close":""},scopedSlots:t._u([{key:"header",fn:function(){return[o("h4",{staticClass:"not-margin"},[t._v(" "+t._s(t.$t("noticeSureCountdownWithdrawPart1"))),o("b",[t._v(" "+t._s(t.$t("noticeSureCountdownWithdrawPart2")))])])]},proxy:!0},{key:"footer",fn:function(){return[o("div",{staticClass:"con-footer"},[o("vs-button",{attrs:{transparent:""},on:{click:t.withdrawWithTimelockFrom}},[t._v(" "+t._s(t.$t("noticeConfirm"))+" ")]),o("vs-button",{attrs:{dark:"",transparent:""},on:{click:function(e){t.timelockDialogShow=!1}}},[t._v(" "+t._s(t.$t("noticeCancel"))+" ")])],1)]},proxy:!0}]),model:{value:t.timelockDialogShow,callback:function(e){t.timelockDialogShow=e},expression:"timelockDialogShow"}},[o("div",{staticClass:"con-content"},[o("p",[t._v(" "+t._s(t.$t("noticeCountdownWithdrawInfo"))+" ")])])]),o("vs-dialog",{attrs:{loading:t.immediateDialogLoading,width:"550px","not-center":"","prevent-close":""},scopedSlots:t._u([{key:"header",fn:function(){return[o("h4",{staticClass:"not-margin"},[t._v(" "+t._s(t.$t("noticeSureNowWithdrawPart1"))),o("b",[t._v(t._s(t.$t("noticeSureNowWithdrawPart2")))])])]},proxy:!0},{key:"footer",fn:function(){return[o("div",{staticClass:"con-footer"},[o("vs-button",{attrs:{transparent:""},on:{click:t.withdrawInstantlyFrom}},[t._v(" "+t._s(t.$t("noticeConfirm"))+" ")]),o("vs-button",{attrs:{dark:"",transparent:""},on:{click:t.closeImmediateDialog}},[t._v(" "+t._s(t.$t("noticeCancel"))+" ")])],1)]},proxy:!0}]),model:{value:t.immediateDialogShow,callback:function(e){t.immediateDialogShow=e},expression:"immediateDialogShow"}},[o("div",{staticClass:"con-content"},[o("p",{staticStyle:{"text-align":"left"}},[t._v(" "+t._s(t.$t("noticeNowWithdrawInfo"))+" ")]),o("vs-input",{attrs:{placeholder:t.$t("noticeMaxWithdrawFee")+(.01*t.withdrawPoolMoney).toFixed(2),type:"number"},model:{value:t.maximumExitFee,callback:function(e){t.maximumExitFee=e},expression:"maximumExitFee"}})],1)])],1)},i=[],n=(o("b680"),o("5530")),a=(o("96cf"),o("1da1")),s=o("f121"),c=o("901e"),l=(o("8f31"),o("fa7d")),p=o("2f62"),d={name:"pool",components:{},data:function(){return{poolBalance:0,poolAwardBalance:0,poolAwardMoney:0,poolMoney:0,prizePeriodRemainingSeconds:0,windowHeight:0,windowWidth:0,depositDialogShow:!1,depositPoolMoney:"",withdrawPoolDialogShow:!1,withdrawPoolMoney:"",withdrawPoolMoneyTimeLock:"",immediateDialogShow:!1,timelockDialogShow:!1,maximumExitFee:"",withdrawPoolDialogLoading:!1,depositDialogLoading:!1,timelockDialogLoading:!1,immediateDialogLoading:!1,pcfxNumber:new c["BigNumber"](0),ticketNumber:new c["BigNumber"](0),awardInfoArray:[],pcfxApy:0,daliyPoolGo:0,reserveTotalSupply:0,intervalTimer:null,isNeedApprove:!1,isFirstRun:!0,dripRatePerSecond:0}},computed:{pcfxContract:function(){return this.$store.state.web3.pcfxContract},ticketContract:function(){return this.$store.state.web3.ticketContract},poolGoContract:function(){return this.$store.state.web3.poolGoContract},prizePoolContract:function(){return this.$store.state.web3.prizePoolContract},periodicPrizeStrategyContract:function(){return this.$store.state.web3.periodicPrizeStrategyContract},tokenFaucetContract:function(){return this.$store.state.web3.tokenFaucetContract},cfxStakeContract:function(){return this.$store.state.web3.cfxStakeContract},firstPoolColor:function(){return 0==this.choosePool?"#E91E63":"#FFFFFF"},secondPoolColor:function(){return 1==this.choosePool?"#E91E63":"#FFFFFF"},countdownTimerWidth:function(){return console.log(this.windowWidth),this.windowWidth<500||this.windowWidth<=1200?this.windowWidth/5:this.windowWidth/12},countdownTimerPadding:function(){return this.windowWidth<500?3:this.windowWidth<=768?8:10}},created:function(){var t=this;t.windowHeight=parseInt("".concat(window.innerHeight)),t.windowWidth=parseInt("".concat(window.innerWidth)),window.onresize=function(){return function(){t.windowHeight=parseInt("".concat(window.innerHeight)),t.windowWidth=parseInt("".concat(window.innerWidth))}()}},mounted:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,r,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t,e.next=3,o.periodicPrizeStrategyContract.prizePeriodRemainingSeconds();case 3:return o.prizePeriodRemainingSeconds=e.sent,e.next=6,o.prizePoolContract.reserveTotalSupply();case 6:return o.reserveTotalSupply=e.sent.toFormat(0),o.$nextTick((function(){o.$refs.timer.updateTime(o.prizePeriodRemainingSeconds.toNumber())})),e.next=10,o.prizePoolContract.getFiveAwardInfo();case 10:if(r=e.sent,o.awardInfoArray=[],null!=r)for(i=0;i<r.length;i++)o.awardInfoArray.push({amount:new c["BigNumber"](r[i].amount).multipliedBy(o.$store.state.web3.pcfxPrice).toFormat(0),winner:l["a"].shortAddr(r[i].addr)});return e.next=15,o.tokenFaucetContract.dripRatePerSecond();case 15:n=e.sent,o.dripRatePerSecond=n,o.daliyPoolGo=n.multipliedBy(86400).toFormat(0),o.update(),o.intervalTimer=setInterval(o.update,6e3);case 20:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){var t=this;clearTimeout(t.intervalTimer)},methods:Object(n["a"])(Object(n["a"])({},Object(p["b"])(["cfxLogin"])),{},{update:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,r,i,n,a,s,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t,e.next=3,o.cfxStakeContract.balanceOfUnderlyingView();case 3:return r=e.sent,e.next=6,o.prizePoolContract.accountedBalance();case 6:return i=e.sent,e.next=9,o.periodicPrizeStrategyContract.prizePeriodRemainingSeconds();case 9:o.prizePeriodRemainingSeconds=e.sent,n=r.multipliedBy(o.prizePeriodRemainingSeconds.multipliedBy(.0408).div(31536e3)),a=r.plus(n).minus(i),s=a.multipliedBy(o.$store.state.web3.pcfxPrice),l=i.multipliedBy(o.$store.state.web3.pcfxPrice),o.poolAwardBalance=a.toFormat(0),o.poolBalance=i.toFormat(0),o.poolAwardMoney=s.toFormat(0),o.poolMoney=l.toFormat(0),o.pcfxApy=new c["BigNumber"](60*o.dripRatePerSecond*60*24*365).multipliedBy(o.$store.state.web3.poolgoPrice).div(i/o.$store.state.web3.pcfxPrice).multipliedBy(100).toFormat(1);case 19:case"end":return e.stop()}}),e)})))()},showWithdrawDialog:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t,null!=o.$store.state.web3.account){e.next=4;break}return e.next=4,o.cfxLogin();case 4:if(0!=o.$store.state.web3.isPortalInstalled){e.next=7;break}return o.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:o.$t("noticeWallet")}),e.abrupt("return");case 7:if(null!=o.$store.state.web3.account){e.next=10;break}return o.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:o.$t("noticeAddr")}),e.abrupt("return");case 10:return o.withdrawPoolDialogShow=!0,o.withdrawPoolDialogLoading=!0,e.next=14,o.ticketContract.balanceOf(o.$store.state.web3.account);case 14:o.ticketNumber=e.sent,o.withdrawPoolDialogLoading=!1,o.withdrawPoolMoney="";case 17:case"end":return e.stop()}}),e)})))()},showTimelockDialog:function(){var t=this;""==t.withdrawPoolMoney||t.withdrawPoolMoney<=0?t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:t.$t("error"),text:t.$t("correctNumPlaceholder")}):(this.withdrawPoolDialogShow=!1,this.timelockDialogShow=!0)},showImmediateDialog:function(){var t=this;""==t.withdrawPoolMoney||t.withdrawPoolMoney<=0?t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:t.$t("error"),text:t.$t("correctNumPlaceholder")}):(this.withdrawPoolDialogShow=!1,this.immediateDialogShow=!0,this.maximumExitFee="")},closeImmediateDialog:function(){this.withdrawPoolDialogShow=!0,this.immediateDialogShow=!1},closeTimeoutDialog:function(){this.withdrawPoolDialogShow=!0,this.tiemoutDialogShow=!1},withdrawWithTimelockFrom:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,r,i,n,a,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t,o.timelockDialogLoading=!0,e.next=4,o.prizePoolContract.withdrawWithTimelockFrom(o.$store.state.web3.account,o.$store.state.web3.account,o.withdrawPoolMoney,s["default"].ticketAddress);case 4:if(r=e.sent,o.timelockDialogLoading=!1,1!=r.succ){e.next=18;break}return console.log(r),i=new c["BigNumber"](r.decodeLogs[r.decodeLogs.length-1].object.unlockTimestamp).toNumber(),e.next=11,t.$store.state.web3.confluxReader.getBlockByHash(r.blockHash);case 11:n=e.sent,a=i-n.timestamp,console.log(a),p=l["a"].formatSeconds(a),t.$vs.notification({duration:6e3,icon:"<i class='bx bx-select-multiple' ></i>",progress:"auto",color:"success",position:"top-center",title:o.$t("info"),text:o.$t("noticeSentece2Part1")+p+o.$t("noticeSentece2Part2")}),e.next=20;break;case 18:return t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:r.message}),e.abrupt("return");case 20:o.withdrawPoolDialogShow=!1,o.timelockDialogShow=!1,o.updateCfxAndPcfxBalance();case 23:case"end":return e.stop()}}),e)})))()},withdrawInstantlyFrom:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t,!(""==o.maximumExitFee||o.maximumExitFee<0)){e.next=4;break}return o.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:o.$t("correctNumPlaceholder")}),e.abrupt("return");case 4:return o.immediateDialogLoading=!0,e.next=7,o.prizePoolContract.withdrawInstantlyFrom(o.$store.state.web3.account,o.withdrawPoolMoney,s["default"].ticketAddress,o.maximumExitFee);case 7:if(r=e.sent,o.immediateDialogLoading=!1,console.log(r),1!=r.succ){e.next=14;break}t.$vs.notification({duration:6e3,icon:"<i class='bx bx-select-multiple' ></i>",progress:"auto",color:"success",position:"top-center",title:o.$t("info"),text:o.$t("noticeSentece3")}),e.next=16;break;case 14:return t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:r.message}),e.abrupt("return");case 16:o.withdrawPoolDialogShow=!1,o.immediateDialogShow=!1,o.updateCfxAndPcfxBalance();case 19:case"end":return e.stop()}}),e)})))()},showDepositDialog:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t,null!=o.$store.state.web3.account){e.next=4;break}return e.next=4,o.cfxLogin();case 4:if(0!=o.$store.state.web3.isPortalInstalled){e.next=7;break}return o.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:o.$t("noticeWallet")}),e.abrupt("return");case 7:if(null!=o.$store.state.web3.account){e.next=10;break}return o.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:o.$t("noticeAddr")}),e.abrupt("return");case 10:return o.depositDialogShow=!0,o.depositDialogLoading=!0,e.next=14,o.pcfxContract.allowance(t.$store.state.web3.account,s["default"].prizePoolAddress);case 14:return r=e.sent,r.isLessThan(1e12)&&(o.isNeedApprove=!0),e.next=18,o.pcfxContract.balanceOf(o.$store.state.web3.account);case 18:o.pcfxNumber=e.sent,o.depositDialogLoading=!1,o.depositPoolMoney="";case 21:case"end":return e.stop()}}),e)})))()},confirmApprove:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t,o.depositDialogLoading=!0,e.next=4,o.pcfxContract.allowance(t.$store.state.web3.account,s["default"].prizePoolAddress);case 4:if(r=e.sent,!r.isLessThan(1e12)){e.next=17;break}return e.next=8,o.pcfxContract.approveMax(t.$store.state.web3.account,s["default"].prizePoolAddress);case 8:if(i=e.sent,o.depositDialogLoading=!1,console.log(i),1!=i.succ){e.next=15;break}o.isNeedApprove=!1,e.next=17;break;case 15:return t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:i.message}),e.abrupt("return");case 17:o.depositDialogLoading=!1;case 18:case"end":return e.stop()}}),e)})))()},confirmDeposit:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=t,!(""==o.depositPoolMoney||o.depositPoolMoney<=0)){e.next=4;break}return o.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:o.$t("correctNumPlaceholder")}),e.abrupt("return");case 4:return o.depositDialogLoading=!0,e.next=7,o.prizePoolContract.depositTo(t.$store.state.web3.account,t.$store.state.web3.account,o.depositPoolMoney,s["default"].ticketAddress,"CFXTEST:TYPE.NULL:AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA6F0VRCSW");case 7:if(r=e.sent,o.depositDialogLoading=!1,console.log(r),1!=r.succ){e.next=15;break}o.depositDialogShow=!1,t.$vs.notification({duration:6e3,icon:"<i class='bx bx-select-multiple' ></i>",progress:"auto",color:"success",position:"top-center",title:o.$t("info"),text:o.$t("noticeSentece4")}),e.next=17;break;case 15:return t.$vs.notification({duration:1e4,icon:"<i class='bx bx-error' ></i>",progress:"auto",color:"danger",position:"top-center",title:o.$t("error"),text:r.message}),e.abrupt("return");case 17:o.updateCfxAndPcfxBalance();case 18:case"end":return e.stop()}}),e)})))()},updateCfxAndPcfxBalance:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var o,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=t,e.next=3,o.pcfxContract.balanceOf(o.$store.state.web3.account);case 3:return r=e.sent,o.$store.commit("UPDATE_PCFX_BALANCE",r),e.next=7,t.$store.state.web3.confluxReader.getBalance(o.$store.state.web3.account);case 7:i=e.sent,o.$store.commit("UPDATE_BALANCE",Object(c["BigNumber"])(i).div(Object(c["BigNumber"])(Math.pow(10,18))));case 9:case"end":return e.stop()}}),e)})))()},maxWithdrawPoolMoney:function(){var t=this;t.withdrawPoolMoney=t.ticketNumber.toFixed(2)},maxDepositPoolMoney:function(){var t=this;t.depositPoolMoney=t.pcfxNumber.toFixed(2)}})},u=d,f=(o("6c27"),o("2877")),g=Object(f["a"])(u,r,i,!1,null,null,null);e["default"]=g.exports},dc5b:function(t,e,o){}}]);
//# sourceMappingURL=pool.ca426fbe.js.map